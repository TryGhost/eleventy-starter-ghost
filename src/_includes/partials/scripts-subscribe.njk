{# Scripts for Members subscription #}
<script>
    // Parse the URL parameter
    function getParameterByName(name, url) {
        if (!url) url = window.location.href;
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    }

    // Give the parameter a variable name
    var action = getParameterByName('action');

    $(document).ready(function () {
        if (action == 'subscribe') {
            $('body').addClass("subscribe-success");
        }

        $('.subscribe-success-message .subscribe-close').click(function () {
            $('.subscribe-success-message').addClass('close');
        });

        // Reset form on opening subscrion overlay
        $('.subscribe-button').click(function() {
            $('.subscribe-overlay form').removeClass();
            $('.subscribe-email').val('');
        });
    });
</script>
